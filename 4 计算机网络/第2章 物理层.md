> 物理层解决如何在连接各种计算机的网络媒体上传输数据比特流，而不是指具体的传输媒体。（传输媒体为第零层）

物理层主要任务：确定与传输媒体接口有关的一些特性 -> **定义标准**

# 2.1 通信基础

## 2.1.1 基本概念

### 物理层接口特性

* **机械特性**：定义物理连接的特性，规定<u>物理连接时所采用的规格、接口形状、引线数目、引脚数量和排列情况</u>。
* **电气特性**：规定传输二进制位时，线路上<u>信号的电压范围、阻抗匹配、传输速率和距离限制</u>等。
	* 例如：某网络在物理层规定，信号的电平用 $+10$ V ~  $+15$ V表示二进制0，用 $-10$ V ~  $-15$ V表示二进制1，电线长度限于15m内。
* **功能特性**：指明某条线上出现的<u>某一电平表示何种含义</u>，接口部件的信号线的用途。
	* 例如：描述一个物理层接口引脚处于高电平时的含义。
* **规程特性**：（过程特性）定义各条物理线路的<u>工作规程和时序的关系</u>。

### 数据通信相关术语

> 通讯的目的是传送消息

#### 数据、信号与码元

* **信息**：信息是事物及其属性标识的集合
* **数据**：数据是信息的符号化序列化标识
* **信号**：数据的电气/电磁表示，是数据在传输过程中的存在形式。
	* **数字信号**：即离散信号，代表消息的参数取值是离散的。
	* **模拟信号**：即连续信号，代表消息的参数取值是连续的。
* **码元**是指用一个固定时长的信号波形（数字脉冲），代表不同离散数值的基本波形，是数字通信中数字信号的计量单位，这个时长内的信号称为 **码元**，而该时长称为**码元宽度**。当码元的离散状态有 $N$ 个时($N\geqslant2$），此时码元为 $N$ 进制码元。 $N$ 进制码元可表示 $\log_{2}N$ 比特信息

#### 信源、信道和信宿

* **信源**：信息发送方
* **信宿**：信息接收方
* **信道**：信号的传输媒介。一般用来表示向某一个方向传送信息的介质，因此一条通讯线路往往包含一条发送信道和一条接收信道。
	* 按传输信号分：模拟信道（传送模拟信号）、数字信道（传送数字信号）
	* 按传输介质分：无线信道、有线信道

#### 速率、波特与带宽

速率也叫数据率，是指数据的传输速率，表示单位时间内传输的数据量，有波特率和比特率两种描述形式：
* **波特率**：表示<u>单位时间内传输的码元个数（也可称为脉冲个数或信号变化的次数）</u>，单位是波特(Baud)。即每秒传输多少码元
* **比特率**：表示<u>单位时间内传输的比特个数</u>，单位是比特/秒(b/s)。即每秒传输多少比特
* 关系：比特率=波特率$\times \log_{2}N$
* **带宽**
	* 基本带宽：基带信号的频率，简称基带，单位Hz
	* 信号带宽：信号成分中最高频率与最低频率之差，单位Hz
	* 信道带宽：信道中能够传输的信号的最高频率与最低频率之差，单位Hz
	* 网络资源带宽：网络线路的数据传送速率，等同比特率，单位bit/s

### 数据通信方式

从通信双方信息的交互方式看，可以有三种基本方式：
* **单工通信**：只有一个方向的通信，而没有反方向的交互，仅需要一条信道。如：广播
* **半双工通信**：通信的双方都可以发送和接收信息，但任何一方都不能同时发送和接收，需要两条信道。如：对讲机
* **全双工通信**：通信双方可以同时发送和接收信息，也需要两条信道。如：打电话

### 数据传输方式

串行传输与并行传输
* **串行传输**：将表示一个字符的8位二进制数按由低位到高位的顺序依次发送（逐个比特发送）
	* 速度慢，费用低，适合远距离
* **并行传输**：将表示一个字符的8位二进制数同时通过8条信道发送
	* 速度快，费用高，适合近距离，常用于计算机内部数据传输

<u>串行传输又可分为同步传输与异步传输</u>
* **同步传输**：在同步传输的模式下，数据的传送是以一个数据区块为单位，因此同步传输又称为区块传输。在传送数据时，<u>需先送出1个或多个同步字符，再送出整批的数据</u>
	* 外同步：在收发双方添加一条单独的时钟信号线
	* 内同步：发送端将时钟同步信号编码到发送数据中一起传输，如曼切斯特编码
* **异步传输**：异步传输将比特分成小组进行传送，小组可以是8位的1个字符或更长。发送方可以在任何时刻发送这些比特组，而接收方不知道它们会在什么时候到达。<u>传送数据时，加一个字符起始位和一个字符终止位</u>
	* 异步是指字节之间异步，即字节之间的时间间隔不固定，但字节中每个比特仍然要同步，即各个比特持续时间相同

## 2.1.2 奈氏准则与香农定理

#### 信号失真

* 有失真但可识别
* 失真大无法识别

影响失真程度的因素：
* 码元传输速率
* 信号传输距离
* 噪声干扰
* 传输媒体质量

### 奈奎斯特定理

* **码间串扰**：当过高频率的信号进入信道时，接收方经过重建的信号频率只会低于信道频率的上限，所以就可能与正常频率信号发生重叠，导致无法确定码元之间的界限，这种现象称为码间串扰
* **理想低通信道**：无噪声且低于信道频率上限的信号都能正常传输的信道，它允许通过的信号频率上限为 $W$ ，同时 $W$ 也为信道带宽
* **奈氏准则**：在<u>理想低通条件</u>下的极限码元传输速率为 $2W$ (Baud)， $W$ 是信道带宽，单位Hz。
	* 可以联系采样定理？
	* 注意：<u>只有在奈氏准则、香农定理这两个公式中的带宽单位采用Hz</u>
	* 根据波特率与比特率的[转换关系](#速率、波特与带宽)，理想低通信道下极限比特速率为 $2W\log_{2}N$ (b/s)，其中 $N$ 是码元的离散电平数目 #考前记一记

总结
* 信道的频带越宽（即能通过的信号高频分量越多），就可以用更高的速率进行码元的有效传输。
* 奈氏准则仅给出了码元传输速率的限制，但并没有限制码元波形种类 $N$，所以要提高数据的传输速率，就必须设法使每个码元能携带更多个比特的信息量，这就需要采用多元制的调制方法。

### 香农定理

* **噪声**：噪声信号会扰乱有效信号的波形，使数据传输受影响。但是噪声是相对的，若信号较强，那么噪声影响相对较小。因此信噪比就很重要
* **香农定理**：在<u>宽带受限且有噪声</u>的信道中，为了不产生误差，信息的数据传输速率有上限值。信道的极限数据传输比特率$=W\log_{2}(1+S/N)$ (b/s)，其中信噪比分贝值$=10\log_{10}(S/N)$，单位dB， $S$ 为信号功率， $N$ 为噪声功率， $W$ 为信道带宽，单位Hz #考前记一记 
总结
* 信道的带宽或信道中的信噪比越大，信息的极限传输速率就越高。
* 只要信息的传输速率低于信道的极限传输速率，就<u>一定能找到某种方法来试实现无差错的传输</u>。
* 香农定理得出的为极限信息传输速率，实际信道的传输速率要比它低不少。

### 奈氏准则和香农定理的区别

* 奈氏准则（内忧），要想提高数据率，就要提高带宽/采用更好的编码技术
* 香农定理（外患），要想提高数据率，就要提高带宽/信噪比
* 二者都满足时，取最小值

## 2.1.3 编码与调制

### 信号

* **信道**：信号的传输媒介。一般用来表示向某一个方向传送信息的介质，因此一条通信线路往往包含一条发送信道和一条接收信道。
* **基带信号**：将数字信号1和0直接用两种不同的电压表示，再送到<u>数字信道</u>上去传输（基带传输）。基带信号是来自信源的信号，像计算机输出的代表各种文字或图像文件的数据信号都属于基带信号。基带信号就是发出的<u>直接表达了要传输的信息的信号</u>，比如我们是说话的声波就是基带信号。
* **宽带信号**：将基带信号进行调整后形成的频分复用模拟信号，再传送到<u>模拟信道</u>上去传输（宽带传输、频带传输）。把基带信号<u>经过载波调制后，把信号的频率范围搬移到较高的频段</u>以便在信道中传输（即仅在一段频率范围内能够通过信道）。

**基带传输与宽带传输**

* 在传输距离较近时，计算机网络采用基带传输方式（近距离衰减小，从而信号内容不易发生变化）
* 在传输距离较远时，计算机网络采用宽带传输方式（远距离衰减大，即使信号变化大也能最后过滤出来基带信号）

| 传输方式 | 信道分类 | 信号分类 |
| -------- | -------- | -------- |
| 基带传输 | 数字信道 | 基带信号 |
| 频带传输 | 模拟信道 | 频带信号 | 

| 原始数据类型 | 编码为数字信号 | 调制为模拟信号 |
|:------------:|:--------------:|:--------------:|
|   数字数据   |   数字发送器   |     调制器     |
|   模拟数据   |   PCM编码器    |     放大器     | 

### 数字数据编码为数字信号
#考前记一记 
从上往下依次为非归零编码、归零编码、曼彻斯特编码、差分曼彻斯特编码
```tikz
\begin{document}
	\begin{tikzpicture}[scale=1, ultra thick]
	\tikzstyle{every node}=[font=\huge, very thick]
		\def\mystring{1,0,0,1,0,1,1,1}  
		\foreach \char [count=\i] in \mystring {
			\node at (\i*2-1, 1) {\char};
			\draw[-, dashed, thick] (\i*2,2) -- (\i*2,-12);
		}
		% 不归零编码
		\def\x{-1}
		\def\prevchar{1}
		\foreach \char [count=\i] in \mystring {
			\ifnum\char=1
				\draw [-] (\i*2-2,\x+1) -- (\i*2,\x+1);
			\else
				\draw [-] (\i*2-2,\x-1) -- (\i*2,\x-1);
			\fi
			
			\ifnum\char=\prevchar
			\else
				\draw [-] (\i*2-2,\x-1) -- (\i*2-2,\x+1);
			\fi
			
			\xdef\prevchar{\char}
		}
		% 归零编码
		\xdef\x{-4}
		\xdef\prevchar{1}
		\foreach \char [count=\i] in \mystring {
			\ifnum\char=1
				\draw [-] (\i*2-2,\x) -- (\i*2-2,\x+1) -- (\i*2-1,\x+1) -- (\i*2-1,\x) -- (\i*2,\x);
			\else
				\draw [-] (\i*2-2,\x) -- (\i*2-2,\x-1) -- (\i*2-1,\x-1) -- (\i*2-1,\x) -- (\i*2,\x);
			\fi
		}
		% 曼切斯特编码
		\xdef\x{-7}
		\xdef\prevchar{1}
		\foreach \char [count=\i] in \mystring {
			\ifnum\char=1
				\draw [-] (\i*2-2,\x+1) -- (\i*2-1,\x+1) -- (\i*2-1,\x-1) -- (\i*2,\x-1);
			\else
				\draw [-] (\i*2-2,\x-1) -- (\i*2-1,\x-1) -- (\i*2-1,\x+1) -- (\i*2,\x+1);
			\fi
			
			\ifnum\char=\prevchar
				\draw [-] (\i*2-2,\x-1) -- (\i*2-2,\x+1);
			\fi
			\xdef\prevchar{\char}
		}
		% 差分曼切斯特编码
		\xdef\x{-10}
		\xdef\flag{0}
		\xdef\prevchar{1}
		\foreach \char [count=\i] in \mystring {
			\ifnum\char=0 % 跳变
				\draw [-] (\i*2-2,\x-1) -- (\i*2-2,\x+1);
			\else % 不跳变
				\pgfmathtruncatemacro{\temp}{1-\flag};
				\xdef\flag{\temp}
			\fi
			
			\ifnum\flag=1
				\draw [-] (\i*2-2,\x+1) -- (\i*2-1,\x+1) -- (\i*2-1,\x-1) -- (\i*2,\x-1);
			\else
				\draw [-] (\i*2-2,\x-1) -- (\i*2-1,\x-1) -- (\i*2-1,\x+1) -- (\i*2,\x+1);
			\fi	
			\xdef\prevchar{\char}
		}
	\draw[-, white] (0,0) -- (0,-12); % 遮挡作用
	\end{tikzpicture}
\end{document}
```
* **不归零编码NRZ**：(Non Return Zero)，高电平为1，低电平为0，等同于原始基带信号
	* 编码容易实现，但没有检错功能，且无法判断一个码元的开始和结束，以至于<u>收发双方难以保持同步</u>
* 归零编码RZ：上凸为1，下凹为0，每个时间间隔中电平都要归零。
* 反向不归零编码NRZI：(Non Return Zero Inverted)类似不归零编码，区别在于信号电平跳变表示0，信号电平不变表示1。
* **曼彻斯特编码**：每个时间间隔中间都发生跳变，向上跳变为0，向下跳变为1。也可以采用相反的规定。
	* 中间信号的跳变既做作为同步信号，又作为数据信号。
	* 所占的频带宽度是原始的基带宽度的两倍。每一个码元都被调成两个电平，所以<u>数据传输速率只有调制速率的1/2</u>。
* **差分曼彻斯特编码**：每个时间间隔中间都发生跳变。间隔起始处发生跳变代表0，无跳变代表1。
	* 中间信号的跳变仅作为同步信号，因此抗干扰能力强。
* 4B/5B编码：比特流中插入额外的比特以打破一连串的0或1，就是用5个比特来编码4个比特的数据，之后再传给接收方，因此称为4B/5B，编码效率为80%。
	* 只采用16种对应16种不同的4位码，其他的16种作为控制码（帧的开始和结束，路线的状态信息等）或保留。

### 模拟数据编码为数字信号

计算机内部处理的是二进制数据，处理的都是数字音频，所以需要将模拟音频通过采样、量化转换成有限个数字表示的离散序列（即实现音频数字化）。

最典型的例子就是对音频信号进行编码的脉冲调制（**PCM**），在计算机应用中，<u>能够达到最高保真水平的就是PCM编码</u>，被广泛用于素材保存及音乐欣赏，CD、DVD以及我们常见的WAV文件中均有应用。它主要包括三步：抽样、量化、编码。
1. **抽样**：对模拟信号周期性扫描，把时间上连续的信号变成时间上离散的信号。为了使所得的离散信号能无失真的代表被抽样的模拟数据，要使用**采样定理**进行采样：$f_{\text{采样频率}}>2f_{\text{信号最高频率}}$ #考前记一记 
2. **量化**：把抽样取得的电平幅值按照一定的分级标度转化为对应的数字值，并取整数，这就把连续的电平幅值转换为离散的数字量。
3. **编码**：把量化的结果转换为与之对应的二进制编码。

### 数字数据调制为模拟信号

数字数据调制技术在发送端将数字信号转换为模拟信号，而在接收端将模拟信号还原为数字信号，分别对应于调制解调器的调制和解调过程。

* **调幅**(ASK)：（幅移键控）通过改变载波信号的振幅来表示数字信号1和0
* **调频**(FSK)：（频移键控）通过改变载波信号的频率来表示数字信号1和0
* **调相**(PSK)：（相移键控）通过改变载波信号的相位来表示数字信号1和0
* **调幅+调相**(QAM)：（正交振幅调制）频率相同的前提下，将ASK和PSK结合起来，形成叠加信号

```tikz
\begin{document}
	\begin{tikzpicture}[scale=1, ultra thick]
	\tikzstyle{every node}=[font=\huge, very thick]
		\def\mystring{0,1,0,0,1,1,1,0,0}  
		\foreach \char [count=\i] in \mystring {
			\node at (\i*2-1, 1) {\char};
			\draw[-, dashed, thick] (\i*2,2) -- (\i*2,-9);
		}
		% 调幅
		\def\x{-1}
		\foreach \char [count=\i] in \mystring {
			\ifnum\char=1
				\draw[domain=\i*2-2:\i*2, smooth, variable=\t] plot ({\t},{sin(2*pi*\t r)+\x});
			\else
				\draw [-] (\i*2-2,\x) -- (\i*2,\x);
			\fi	
		}
		% 调频
		\xdef\x{-4}
		\foreach \char [count=\i] in \mystring {
			\ifnum\char=1
				\draw[domain=\i*2-2:\i*2, smooth, variable=\t] plot ({\t},{sin(4*pi*\t r)+\x});
			\else
				\draw[domain=\i*2-2:\i*2, smooth, variable=\t] plot ({\t},{sin(2*pi*\t r)+\x});
			\fi
		}
		% 调相
		\def\x{-7}
		\foreach \char [count=\i] in \mystring {
			\ifnum\char=1
				\draw[domain=\i*2-2:\i*2, smooth, variable=\t] plot ({\t},{sin(2*pi*\t r)+\x});
			\else
				\draw[domain=\i*2-2:\i*2, smooth, variable=\t] plot ({\t},{-sin(2*pi*\t r)+\x});
			\fi	
		}
	\end{tikzpicture}
\end{document}
```


### 模拟数据调制为模拟信号

<u>为了实现传输的有效性，可能需要较高的频率</u>。这种调制方式还可以使用频分复用技术，充分利用带宽资源。在电话机和本机交换机所传输的信号是采用模拟信号传输模拟数据的方式；模拟的声音数据是加载到模拟的载波信号中传输的。

## 2.1.4 数据交换方式

> 交换是通过某些交换中心将数据进行集中和传送

### 电路交换

* **实现思路**：在源站点和目的站点之间建立一条直连、独占的物理通路，通过这条数据通路将整个报文的比特流连续地从源站点送达目的站点。在数据传输结束之前，这条线路一直保持
* 电路交换的阶段
	1. 建立连接（呼叫/电路建立）
	2. 通信（数据传输）
	3. 释放连接（拆除电路）
* 特点：独占资源。用户始终占用端到端的固定传输带宽
* 电路交换的优点主要有：
	* 实时性强：物理链路一经建立，双方可随时发送数据，由于链路直连故数据传输时延低。
	* 数据连续有序：通信双方按序收发数据，中间节点不作干预，不存在数据乱序问题。
	* 可靠性高：电路交换占用固定线路资源，不易丢失数据，可靠性高错误率低。
	* 安全性好：源站与目的站之间的中间节点较少且路径可控，便于监测与防窃听。
	* 实现简单：电路交换所用的交换设备（中间节点）以及电路的控制比较容易实现。
* 电路交换的缺点主要有：
	* 建立连接耗时长：源站发起连接建立请求后，需要等待较长时间才能建立成功。
	* 线路利用率低：通信双方独占线路，不收发数据时线路处于空闲状态，其他站点须等待通信双方拆除连接。
	* 差错控制缺失：中间节点不具备存储、解析并校验数据以及差错控制等能力，无法及时发现并纠正错误（后来人们提出了存储转发交换方式，包括报文交换和分组交换）。
	* 单目的站点通信：电路交换受制于双方独占线路，难以实现广播及多站点通信。
	* <u>无数据存储能力，难以平滑通信量</u>

### 报文交换

> 属于存储转发交换方式

* **报文**：报文(message)是网络中交换与传输的数据单元，即<u>站点一次性要发送的数据块</u>。报文包含了将要发送的完整的数据信息以及源站点地址和目的站点地址
* **实现思路**：发送前无需建立连接，以报文作为数据传输单位，采用接力传递的形式，中间节点在收到报文后再存储转发报文
* 报文交换的阶段
	1. 报文（目的+源地址）
	2. 每个结点收下整个报文后，暂存报文并检查有无错误
	3. 当所需要的输出电路空闲时，利用路由信息找到下一个结点地址，传送个下一个结点
* 报文交换的优点主要有：
	* 无需建立连接，无建立连接时延，用户可随时发送报文
	* 动态分配线路，动态选择报文通过的最佳路径，可以平滑通信量
	* 提高线路的可靠性。某条传输路径发生故障，可重新选择另一条路径进行传输
	* 提高线路利用率。通信双方在不同的时间一段一段地部分占有这条物理通道，多个报文可共享信道
	* 提供多目标服务。一个报文可同时发往多个目的地址
	* 在存储转发中容易实现代码转换和速率匹配，甚至收发双方可以不同时处于可用状态。这样就便于类型、规格和速度不同的计算机之间进行通信
* 报文交换的缺点主要有：
	* 实时性差。中间各节点需要对报文执行存储、完整性校验、转发等操作，从而产生转发时延
	* 需要较大的存储空间。由于报文长度没有限制，而每个中间结点都要完整地接收传来的整个报文，当输出线路不空闲时，还可能要存储几个完整报文等待转发，要求网络中每个结点有较大的缓冲区
	* 无效传输率高：报文长度较大，发生错误的几率相对更高。

### 分组交换

> 属于存储转发交换方式，是最常使用的方式

* **分组**：大多数计算机网络都不能连续地传送任意长的数据，所以实际上网络系统把数据分割成小块，然后逐块地发送，这种小块就称作分组(packet)
* **实现思路**：在报文交换的基础上，将大的报文分成小的分组，中间站点对分组进行存储转发，目的站点将收到的分组根据编号重新组装成报文。
* 分组交换的阶段
	1. 报文分割
	2. 分组存储转发
	3. 分组组装
* 分组交换的主要优点有：
	* 存储空间开销较小：分组交换传输单元更小，存储转发的空间开销相对更低，并且分组长度固定简化了存储管理。
	* 传输时延低：同一时刻属于同一报文的分组可分布于多段线路，缩短报文传输时间，网络负载低时传输时延小。
	* 无效传输率低：分组短小，发生错误的可能性低，且当分组发生错误时，只要重传这个分组，分组重传的代价比报文小。
	* 突发式通信服务：分组短小，适合采用优先级策咯及时传递紧急数据。
* 分组交换的缺点主要有：
	* 分组乱序：各个分组可能通过不同路径到达目的站点，目的站点接收到的分组可能出现失序、重复问题（仅限于数据报分组交换）。
	* 通信效率降低：每个分组都要携带地址、分组编号等信息，实际有效数据占比降低。

### 数据交换方式的选择

* 传送数据量大，且传送时间远大于呼叫时，选择电路交换电路交换传输时延最小
* 当端到端的通路有很多段的链路组成时，采用分组交换传送数据较为合适
* 从信道利用率上看，报文交换和分组交换优于电路交换，其中分组交换比报文交换的时延小，尤其适合于计算机之间的突发式的数据通信

## 2.1.5 数据报和虚电路

分组交换的通信网络内部操作方式分为无连接的数据报方式和面向连接的虚电路方式

### 数据报方式
> 可靠通信由用户主机来保证，不需要建立网络层连接

* 数据报方式为网络层提供无连接服务。发送方可随时发送分组，网络中的结点可随时接收分组。
* **无连接服务**：不事先为分组的传输确定传输路径，每个分组独立确定传输路径，不同分组传输路径可能不同。
* 同一报文的不同分组达到目的结点时可能发生乱序、重复与丢失。
* <u>每个分组在传输过程中都必须携带源地址和目的地址，以及分组号</u>。
* 分组在交换结点存储转发时，需要排队等候处理，这会带来一定的时延。当通过交换结点的通信量较大或网络发生拥塞时，这种时延会大大增加，交换结点还可根据情况丢弃部分分组。
* 网络具有冗余路径，当某一交换结点或一段链路出现故障时，可相应地更新转发表，寻找另一条路径转发分组，对故障的适应能力强，<u>适用于突发性通信，不适于长报文、会话式通信</u>。

### 虚电路方式

> 虚电路将数据报方式和电路交换方式结合，以发挥二者优点

* **虚电路**：一条源主机到目的主机类似于电路的路径（逻辑连接），路径上所有结点都要维持这条虚电路的建立，都维持一张虚电路表，每一项记录了一个打开的虚电路的信息
* 虚电路操作方式的阶段
	1. 建立连接（虚电路建立）：源主机发送“呼叫请求”分组并受到“呼叫应答”分组后才算建立连接
	2. 数据传输：每个分组携带<u>虚电路号</u>，分组号、检验和等控制信息
	3. 释放连接（虚电路释放）：源主机发送“释放请求”分组以拆除虚电路
* 特点
	* 虚电路方式为网络层提供连接服务。源节点与目的结点之间建立一条逻辑连接，而非实际物理连接。
	* **连接服务**：首先为分组的传输确定传输路径（建立连接），然后沿该路径（连接）传输系列分组,系列分组传输路径相同，传输结束后拆除连接。
	* 一次通信的所有分组都通过虚电路顺序传送，分组不需携带源地址、目的地址等信息，包含虚电路号，相对数据报方式开销小，同一报文的不同分组到达目的结点时不会乱序、重复或丢失。
	* 分组通过虚电路上的每个节点时，节点只进行差错检测，不需进行路由选择。
	* 每个节点可能与多个节点之间建立多条虚电路，每条虚电路支持特定的两个端系统之间的数据传输，可以对两个数据端点的流量进行控制，两个端系统之间也可以有多条虚电路为不同的进程服务。
* 致命弱点：<u>当网络中的某个结点或某条链路出故障而彻底失效时，则所有经过该结点或该链路的虚电路将遭到破坏</u>

|                    | 数据报服务                                                 | 虚电路服务                                               |
|:------------------:|:---------------------------------------------------------- | -------------------------------------------------------- |
|     连接的建立     | 不需要建立网络层连接                                       | 必须建立网络层连接                                       | 
|      目的地址      | 每个分组都有完整的目的地址                                 | 仅在建立连接阶段使用，之后每个分组使用长度较短的虚电路号 |
|      路由选择      | 每个分组独立地进行路由选择和转发                           | 属于同一条虚电路的分组按照同一路由转发分组顺序           |
|       可靠性       | 不保证可靠通信，可靠性由用户主机来保证                     | 可靠性由网络保证                                         |
| 对网络故障的适应性 | 出故障的结点丢失分组，其他分组路径选择发生变化，可正常传输 | 所有经过故障结点的虚电路均不能正常工作                   |
| 差错处理和流量控制 | 由用户主机进行流量控制，不保证数据报的可靠性               | 可由分组交换网负责，也可由用户主机负责                   |

## 2.1.6 本节习题精选

**选择题**：[题目](4%20计算机网络/王道计算机网络.pdf#page=53&selection=113,0,118,1)、[答案](4%20计算机网络/王道计算机网络.pdf#page=58&selection=229,0,234,1)

**综合题**：[题目](4%20计算机网络/王道计算机网络.pdf#page=57&selection=267,0,272,2)、[答案](4%20计算机网络/王道计算机网络.pdf#page=63&selection=574,0,579,2)

# 2.2 传输介质

* **传输介质**：也称传输媒体/传输媒介，它就是数据传输系统中在发送设备和接收设备之间的<u>物理通路</u>。
* <u>传输媒体并不是物理层</u>。传输媒体在物理层的下面，因为物理层是体系结构的第一层，因此<u>有时称传输媒体为0层</u>。
* 在传输媒体中传输的是信号，传输媒体并不知道所传输的信号代表什么意思。但物理层规定了电气特性，因此能够识别所传送的比特流。
* **传输媒体的分类**：
	* 导向性传输介质：电磁波被导向沿着固体媒介（铜线/光纤）传播。
	* 非导向性传输介质：自由空间，介质可以是空气、真空、海水等。

## 2.2.1 导向性传输介质

### 双绞线

* **双绞线TP**：(Twisted Pair)由两根相互绝缘的铜导线绞合而成。绞合可以减少对相邻导线的电磁干扰。根据右手准则，产生的电磁波大小相等，相互抵消。
* **屏蔽双绞线STP**：(Shield Twisted Pair)为了进一步提高抗电磁干扰能力，可在双绞线的外面再加上一个由金属丝编织成的屏蔽层，这就是屏蔽双绞线(STP)，无屏蔽层的双绞线就称为非屏蔽双绞线(UTP, Unshielded Twisted Pair)。
* 双绞线价格便宜，是最常用的传输介质之一，在局域网和传统电话网中普遍使用。模拟传输和数字传输都可以使用双绞线，其通信距离一般为几公里到数十公里。
	* 距离太远时，对于模拟传输要用<u>放大器</u>放大衰减的信号；
	* 对于数字传输，要用<u>中继器</u>将失真的信号整形。

### 同轴电缆

* **同轴电缆**：同轴电缆有两部分导体，内导体与外导体同轴心，两导体间填充绝缘层，外导体同时作为屏蔽层，电缆外部有绝缘保护套。
* 按特性抗阻数值的不同，通常将同轴电缆分为两类：50Ω同轴电缆和75Ω同轴电缆。
	* 50Ω同轴电缆主要用于传送基带数字信号，又称为**基带同轴电缆**，它在局域网中得到广泛应用。又分为粗同轴电缆和细同轴电缆：
		* 10Base5：粗缆以太网，数据率为10Mb/s，每段电缆最大长度为500m；使用特殊的收发器连接到电缆上，收发器完成载波监听和冲突检测的功能。
		* 10Base2：细缆以太网，数据率为10Mb/s，每段电缆最大长度为185m；使用BNC连接器形成T形连接，无源部件。
	* 75Ω同轴电缆主要用于传送宽带信号，又称为**宽带同轴电缆**，它主要用于有线电视系统。
* 由于外导体屏蔽层的作用，同轴电缆抗干扰特性比双绞线好，被广泛用于传输较高速率的数据，其传输距离更远，但价格较双绞线贵。

### 光纤

* **光纤**：光导纤维，是一种导向传播光束的介质，相较于其他传输介质，光纤抗干扰能力强、信号衰弱程度小、传输速度快。<u>光纤主要由纤芯和包层构成</u>，光波通过纤芯进行传导，包层较纤芯有较低的折射率。当光线从高折射率的介质射向低折射率的介质时，其折射角将大于入射角。因此，如果入射角足够大，就会出现全反射，即光线碰到包层时候就会折射回纤芯、这个过程不断重复，光也就沿着光纤传输下去。
* 光纤通信就是利用光纤传递<u>光脉冲</u>来进行通信。有光脉冲表示1，无光脉冲表示0。而可见光的频率大约是108MHz，因此<u>光纤通信系统的带宽远远大于目前其他各种传输媒体的带宽</u>。（双绞线和同轴电缆传送的是电脉冲）
* 光纤在发送端有**光源**，可以采用发光二极管或半导体激光器，它们在电脉冲作用下能产生出光脉冲；在接收端用光电二极管做成**光检测器**，在检测到光脉冲时可还原出电脉冲。
* 光缆：一根光缆少则只有一根光纤，多则包括数百根光纤

![光纤](pictures/第2章%20物理层%20光纤.png)

#### 单模光纤与多模光纤

> 一条光信号与多条光信号

**单模光纤**：是一种在横向模式直接传输光信号的光纤，光源为定向性很好的<u>激光二极管</u>，特点是衰耗小，适合远距离传输。![单模光纤](pictures/第2章%20物理层%20单模光纤.png)

**多模光纤**：有多种传输光信号模式的光纤，光源为<u>发光二极管</u>，特点是易失真，适合近距离传输。![多模光纤](pictures/第2章%20物理层%20多模光纤.png)

|      | 单模光纤                         | 多模光纤                   |
| ---- | -------------------------------- | -------------------------- |
| 定义 | 一种横向模式直接传输光信号的光纤 | 有多种传输光信号模式的光纤 |
| 光源 | 定向性很好的激光二极管           | 普通发光二极管             |
| 特点 | 衰耗小，适合远距离传输           | 容易失真，适合近距离传输   |

**光纤的特点**
* 传输损耗小，中继距离长，对远距离传输特别经济
* 抗雷电和电磁干扰性能好。
* 无串音干扰，保密性好，也不易被窃听或截取数据。
* 体积小，重量轻。
* 割接需要专用设备，光电接口价格较贵

## 2.2.2 非导向性传输介质

### 无线电波

* 无线电波：在自由空间传播的射频频段的电磁波。
* 无线电波具有较强穿透能力，可传远距离，广泛用于通信领域（如手机通信）。
* <u>信号向所有方向传播</u>。

### 微波

* 微波：微波是一种比一般的无线电波频率更高的电磁波，通常也称为超高频电磁波
* 微波在电离层已不能反射，在地表绕射损耗大，因此只能用于视距之内的通信。
* 微波通信频率较高、频道范围宽，因此数据率很高。
* <u>信号固定方向传播</u>。
* 微波应用分类
	* 地面微波接力通信
	* 卫星通信
		* 优点：通信容量大、距离远、覆盖广、广播通信和多址通信
		* 缺点：传播时延长、受气候影响大（强风、太阳黑子爆发、日凌）、误码率较高、成本高

### 红外线

* 红外线：红外线是不可见光的一种，抗电磁干扰性好，常用于近距离遥控。
* 红外通信就是将二进制数字信号进行调制解调，然后利用红外信道进行传输。
* <u>信号固定方向传播</u>。

## 激光
* 激光通信是一种点对点通信技术。
* <u>信号固定方向传播</u>。

## 2.2.3 本节习题精选

**选择题**：[题目](4%20计算机网络/王道计算机网络.pdf#page=67&selection=590,0,593,1)、[答案](4%20计算机网络/王道计算机网络.pdf#page=68&selection=420,0,423,1)

|题号|笔记|
|:----:|:----|
|[1](file://Z:/考研/计算机/04.计算机网络习题精讲/02.第二章%20物理层/02.2.2%20传输介质/01.2.2选择1.mp4)||
|[2](file://Z:/考研/计算机/04.计算机网络习题精讲/02.第二章%20物理层/02.2.2%20传输介质/02.2.2选择2.mp4)||
|[3](file://Z:/考研/计算机/04.计算机网络习题精讲/02.第二章%20物理层/02.2.2%20传输介质/03.2.2选择3.mp4)||
|[4](file://Z:/考研/计算机/04.计算机网络习题精讲/02.第二章%20物理层/02.2.2%20传输介质/04.2.2选择4.mp4)||
|[5](file://Z:/考研/计算机/04.计算机网络习题精讲/02.第二章%20物理层/02.2.2%20传输介质/05.2.2选择5.mp4)||
|[6](file://Z:/考研/计算机/04.计算机网络习题精讲/02.第二章%20物理层/02.2.2%20传输介质/06.2.2选择6.mp4)||
|[7](file://Z:/考研/计算机/04.计算机网络习题精讲/02.第二章%20物理层/02.2.2%20传输介质/07.2.2选择7.mp4)||
|[8](file://Z:/考研/计算机/04.计算机网络习题精讲/02.第二章%20物理层/02.2.2%20传输介质/08.2.2选择8.mp4)||
|[9](file://Z:/考研/计算机/04.计算机网络习题精讲/02.第二章%20物理层/02.2.2%20传输介质/09.2.2选择9.mp4)||
|[10](file://Z:/考研/计算机/04.计算机网络习题精讲/02.第二章%20物理层/02.2.2%20传输介质/10.2.2选择10.mp4)||
|[11](file://Z:/考研/计算机/04.计算机网络习题精讲/02.第二章%20物理层/02.2.2%20传输介质/11.2.2选择11.mp4)||
|[12](file://Z:/考研/计算机/04.计算机网络习题精讲/02.第二章%20物理层/02.2.2%20传输介质/12.2.2选择12.mp4)||


# 2.3 物理层设备

## 2.3.1 中继器

* **诞生原因**：由于存在损耗，在线路上传输的信号功率会逐渐衰减，衰减到一定程度时将造成信号失真，因此会导致接收错误。
* **中继器的功能**：用于对接收到的信号进行整形再放大，以增加信号传输的距离，延长网络的长度。
* 中继器的限制条件
	* 中继器只将任何电缆段上的数据发送到另一段电缆上，它<u>仅作用于信号的电气部分</u>，并不管数据中是否有错误数据或不适于网段的数据。
	* 中继器没有存储转发功能，因此两端的网段一定要是同一个协议并且传输速率相同。
	* 中继器的使用需要遵循**5-4-3原则**：一个网段最多划分5个子网段，最多使用4个中继器，最多只有3个子网段可以连接计算机 #考前记一记
* 中继器vs放大器
	* 放大器：作用于模拟信号，只是简单地将衰减的信号放大
	* 中继器：作用于数字信号，将信号整形放大再转发出去，保持与原数据相同，可以消除信号由于噪声或其他原因造成的失真

## 2.3.2 集线器

> 相当于一个多端口中继器

* **集线器**：集线器实际上是多端口中继器，对信号进行再生放大转发，接着转发到除输入端口外其他所有处于工作状态的端口上，以增加信号传输的距离，延长网络的长度。
* 集线器不具备信号的定向传送能力，是一个共享式设备。（广播）
* 集线器仅支持半双工通信，若一个冲突域内多台设备同时传输信号会发生冲突
* 集线器连接多台设备所构成的网络在物理上是星形网络，在逻辑上是总线型网络
* 集线器不能分割冲突域，连在集线器上的工作主机平分带宽

![集线器扩展以太网](pictures/第2章%20物理层%20集线器扩展以太网.png)
## 2.2.3 本节习题精选

**选择题**：[题目](4%20计算机网络/王道计算机网络.pdf#page=70&selection=512,0,515,1)、[答案](4%20计算机网络/王道计算机网络.pdf#page=71&selection=335,0,338,1)

